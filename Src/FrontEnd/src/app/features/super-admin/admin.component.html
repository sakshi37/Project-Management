<div class="container">
  <br />
  <h5 class="mb-10">üõ°Ô∏è Admin Guardian Panel</h5>
  <hr class="my-2" />

  <p *ngIf="isLoading">Loading requests...</p>

  <!-- Search Input -->
  <div class="mb-3">
    <label class="me-2">Search:</label>
    <input
      type="text"
      class="form-control form-control-sm d-inline-block"
      style="width: 200px"
      [(ngModel)]="searchTerm"
      (input)="filterRequests()"
    />
  </div>

  <p *ngIf="!isLoading">
    Showing {{ (currentPage - 1) * pageSize + 1 }} ‚Äì
    {{
      Math.min(currentPage * pageSize, filteredRequests.length)
    }} of {{ filteredRequests.length }} entries
  </p>

  <table
    *ngIf="!isLoading && pagedRequests.length > 0"
    class="table table-bordered table-striped"
  >
    <thead>
      <tr>
        <th>Sr. No</th>
        <th>Request Date</th>
        <th>Employee Name</th>
        <th>Requested By</th>
        <th>Reason</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let req of pagedRequests; let i = index">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ req.requestDate | date:'yyyy-MM-dd' }}</td>
        <td>{{ req.employeeName }}</td>
        <td>{{ req.requestByName }}</td>
        <td>{{ req.reason }}</td>
        <td>
          <button mat-icon-button (click)="approveRequest(req.id)" title="Approve">
  <mat-icon style="color: green;">check_circle</mat-icon>
</button>

<button mat-icon-button (click)="rejectRequest(req.id)" title="Reject">
  <mat-icon style="color: red;">cancel</mat-icon>
</button>

        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <nav *ngIf="filteredRequests.length > pageSize">
    <ul class="pagination justify-content-center">
      <li
        class="page-item"
        [class.disabled]="currentPage === 1"
        (click)="changePage(currentPage - 1)"
      >
        <a class="page-link" href="javascript:void(0)">Previous</a>
      </li>
      <li
        class="page-item"
        *ngFor="let page of totalPagesArray"
        [class.active]="currentPage === page"
        (click)="changePage(page)"
      >
        <a class="page-link" href="javascript:void(0)">{{ page }}</a>
      </li>
      <li
        class="page-item"
        [class.disabled]="currentPage === totalPages"
        (click)="changePage(currentPage + 1)"
      >
        <a class="page-link" href="javascript:void(0)">Next</a>
      </li>
    </ul>
  </nav>

  <p *ngIf="!isLoading && filteredRequests.length === 0">
    No pending requests.
  </p>
</div>
